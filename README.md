# Airport Cost-Sharing Game with Shapley Values

## Overview
This project implements a simulation of the **Airport Cost-Sharing Game**, a classic problem in cooperative game theory. The goal is to fairly distribute the cost of a shared resource (a runway) among multiple agents (airplanes) who have different requirements (runway lengths).

The system uses **Shapley Values** to determine the fair cost allocation. The Shapley value is a solution concept that assigns a unique distribution of the total surplus (or cost) generated by the coalition of all players. It satisfies important fairness properties such as efficiency, symmetry, and linearity.

## Features
- **Modular Architecture**: Clean separation of concerns using Domain-Driven Design (DDD) principles.
- **Shapley Value Calculation**:
  - **Exact Algorithm**: Computes the exact Shapley values by iterating over all permutations (O(N!)). Suitable for small groups.
  - **Approximate Algorithm**: Uses Monte Carlo sampling to estimate Shapley values. Suitable for larger groups.
- **Interactive GUI**: A Tkinter-based graphical user interface to configure games, run simulations, and visualize results.
- **Extensible Design**: Built with inheritance, polymorphism, and design patterns (Factory, Singleton) to easily add new game types or algorithms.

## Installation

### Prerequisites
- Python 3.8 or higher
- Conda (recommended for environment management)

### Setting up the Environment
1. Create a new Conda environment:
   ```bash
   conda create -n shapley_env python=3.10
   ```
2. Activate the environment:
   ```bash
   conda activate shapley_env
   ```
3. Install the required packages:
   ```bash
   pip install -r requirements.txt
   ```

## Usage

### Running the GUI Application
To start the interactive application, run:
```bash
python main.py
```
1. Enter the number of players and click "Generate Random Players".
2. Select the calculation algorithm (Exact or Approximate).
3. (Optional) Set the number of samples for the approximate algorithm.
4. Click "Run Simulation" to see the results and cost allocation chart.

### Running the Verification Script
To verify the correctness of the implementation against known examples:
```bash
python verify.py
```

## Project Structure
```
src/
├── domain/         # Game logic (Airport Game implementation)
├── infrastructure/ # Shared services (Logger, Config)
├── models/         # Data structures
│   ├── entities/   # Pydantic models (Player, Config, Result)
│   └── enums/      # Enumerations (AlgorithmType)
├── services/       # Shapley calculators (Exact, Approximate)
├── simulation/     # Simulation orchestration
└── ui/             # Graphical User Interface
```
